(this.webpackJsonptodosie=this.webpackJsonptodosie||[]).push([[0],{162:function(e,t,n){e.exports=n(328)},167:function(e,t,n){},168:function(e,t,n){},328:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(34),r=n.n(a),c=(n(167),n(338)),s=n(27),l=(n(168),Object(o.createContext)({})),u=l.Provider,d=function(){return Object(o.useContext)(l)},f=n(47),p=n(48),h=n(337),v=n(329),b=n(335),g=n(64),m=function(e){return function(t){"Enter"===t.key&&e()}},w=function(e){var t=e.todo,n=d(),a=Object(o.useState)(""),r=Object(p.a)(a,2),c=r[0],l=r[1],u=Object(o.useState)(!1),w=Object(p.a)(u,2),k=w[0],y=w[1],D=Object(o.createRef)(),j=function(){n.updateTodo(Object(f.a)({},t,{text:c})),y(!1),l("")};return Object(g.a)((function(){return i.a.createElement(h.a.Item,null,i.a.createElement(h.a.Content,{floated:"right"},i.a.createElement(v.a,{icon:"check",toggle:!0,onClick:function(){return n.updateTodo(Object(f.a)({},t,{isDone:!t.isDone}))},active:t.isDone}),i.a.createElement(v.a,{icon:"close",onClick:function(){return n.removeTodo(t)}})),i.a.createElement(h.a.Content,null,i.a.createElement(b.a,{fluid:!0,ref:D,icon:k?i.a.createElement(s.a,{name:"save",link:!0,onClick:j}):i.a.createElement(s.a,{name:"pencil",link:!0,onClick:function(){var e;y(!0),null===(e=D.current)||void 0===e||e.focus()}}),iconPosition:"left",readOnly:!k,onKeyDown:m(j),onChange:function(e){return l(e.target.value)},value:k&&c||t.text})))}))},k=function(){var e=Object(o.useState)(""),t=Object(p.a)(e,2),n=t[0],a=t[1],r=d(),c=function(){""!==n.trim()&&(r.addTodo(n),a(""))};return i.a.createElement(h.a.Item,null,i.a.createElement(h.a.Content,{floated:"right"},i.a.createElement(v.a,{icon:"plus",onClick:c,style:{marginRight:"3.2em"}})),i.a.createElement(h.a.Content,null,i.a.createElement(b.a,{fluid:!0,placeholder:"Enter todo item...",value:n,onKeyDown:m(c),onChange:function(e){return a(e.target.value)}})))},y=function(){var e=d();return Object(g.a)((function(){return i.a.createElement(h.a,{divided:!0,verticalAlign:"middle"},i.a.createElement(k,null),e.list.map((function(e){return i.a.createElement(w,{key:e.ID,todo:e})})))}))},D=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(c.a,{as:"h2"},i.a.createElement(s.a,{name:"check"}),i.a.createElement(c.a.Content,null,"Todo App")),i.a.createElement(y,null))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var E,S,T,z,q,A,x,K,N,I,Z,C=n(17),P=n.n(C),F=n(50),M=n(22),J=n(30),U=n(23),H=(n(130),n(14)),X=n(95),B=n(35),R=n.n(B),Q=(E=function e(t){Object(J.a)(this,e),this.ID=void 0,Object(M.a)(this,"text",S,this),Object(M.a)(this,"isDone",T,this),Object(M.a)(this,"update",z,this),this.text=t.text,this.ID=t.ID,this.isDone=t.isDone},S=Object(U.a)(E.prototype,"text",[H.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=Object(U.a)(E.prototype,"isDone",[H.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(U.a)(E.prototype,"update",[H.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.text=t.text,e.isDone=t.isDone}}}),E),G=(q=H.f.shallow,A=function e(t,n){var o=this;Object(J.a)(this,e),this.client=void 0,this.listID="",this.user="",Object(M.a)(this,"list",x,this),Object(M.a)(this,"loadList",K,this),Object(M.a)(this,"updateTodo",N,this),Object(M.a)(this,"addTodo",I,this),Object(M.a)(this,"removeTodo",Z,this),console.log(n,"config"),t.forEach(this.addTodo),this.client=new X.Client(n);var i=R.a.parse(window.location.search);if(i.id)return this.listID=i.id.toString(),this.client.listen(this.listID,"Todo","any",(function(e,t){console.log(t),console.log(e,"entity"),e&&o.loadList()})),void this.loadList();var a="6daba587-2abe-4586-b570-1a5850a16f12",r=[{address:"/ip4/127.0.0.1/tcp/4006/p2p/12D3KooWFSqRCUdV6J8De5PzspT8vwQcZNYvkNZ2P14Hzk8792p1/thread/bafk6blr7go7q7pa2fgvmhdosystt5l4c3o4vpkexnz7s6frzqtbrdbi",followKey:"AqJXmAigYaKgiAFR6kNufHMyVU57ADovHSZgUkwF71ejw274pSf1vGKsAibf",readKey:"2BNiE45Q1os81TMzhNBDhJquscjug93MnMSq3X2gyGkPytc6vahuaSPTsZZm5"},{address:"/ip4/172.31.0.2/tcp/4006/p2p/12D3KooWFSqRCUdV6J8De5PzspT8vwQcZNYvkNZ2P14Hzk8792p1/thread/bafk6blr7go7q7pa2fgvmhdosystt5l4c3o4vpkexnz7s6frzqtbrdbi",followKey:"AqJXmAigYaKgiAFR6kNufHMyVU57ADovHSZgUkwF71ejw274pSf1vGKsAibf",readKey:"2BNiE45Q1os81TMzhNBDhJquscjug93MnMSq3X2gyGkPytc6vahuaSPTsZZm5"},{address:"/ip4/104.210.43.77/tcp/4006/p2p/12D3KooWFSqRCUdV6J8De5PzspT8vwQcZNYvkNZ2P14Hzk8792p1/thread/bafk6blr7go7q7pa2fgvmhdosystt5l4c3o4vpkexnz7s6frzqtbrdbi",followKey:"AqJXmAigYaKgiAFR6kNufHMyVU57ADovHSZgUkwF71ejw274pSf1vGKsAibf",readKey:"2BNiE45Q1os81TMzhNBDhJquscjug93MnMSq3X2gyGkPytc6vahuaSPTsZZm5"},{address:"/ip4/104.210.43.77/tcp/10733/p2p/12D3KooWFSqRCUdV6J8De5PzspT8vwQcZNYvkNZ2P14Hzk8792p1/thread/bafk6blr7go7q7pa2fgvmhdosystt5l4c3o4vpkexnz7s6frzqtbrdbi",followKey:"AqJXmAigYaKgiAFR6kNufHMyVU57ADovHSZgUkwF71ejw274pSf1vGKsAibf",readKey:"2BNiE45Q1os81TMzhNBDhJquscjug93MnMSq3X2gyGkPytc6vahuaSPTsZZm5"},{address:"/ip4/10.255.0.2/tcp/10733/p2p/12D3KooWFSqRCUdV6J8De5PzspT8vwQcZNYvkNZ2P14Hzk8792p1/thread/bafk6blr7go7q7pa2fgvmhdosystt5l4c3o4vpkexnz7s6frzqtbrdbi",followKey:"AqJXmAigYaKgiAFR6kNufHMyVU57ADovHSZgUkwF71ejw274pSf1vGKsAibf",readKey:"2BNiE45Q1os81TMzhNBDhJquscjug93MnMSq3X2gyGkPytc6vahuaSPTsZZm5"}];this.client.startFromAddress(a,r[0].address,r[0].followKey,r[0].readKey).then((function(){o.listID=a;var e=Object(f.a)({},i,{id:a});console.log(e,"query"),window.location.search=R.a.stringify(e)}))},x=Object(U.a)(A.prototype,"list",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=Object(U.a)(A.prototype,"loadList",[H.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(Object(F.a)(P.a.mark((function t(){var n,o,i,a,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=R.a.parse(window.location.search),i=(null===o||void 0===o?void 0:null===(n=o.user)||void 0===n?void 0:n.toString())||"",t.next=4,e.client.modelFind(e.listID,"Todo",{});case 4:return a=t.sent,console.log(e.listID,"Todo",{},a,i),e.list=a.entitiesList.map((function(e){return e})).map((function(e){return console.log(e),new Q(e)})),t.next=9,e.client.getStoreLink(e.listID);case 9:r=t.sent,console.log("link",r);case 11:case"end":return t.stop()}}),t)}))))}}),N=Object(U.a)(A.prototype,"updateTodo",[H.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(F.a)(P.a.mark((function t(n){var o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.modelSave(e.listID,"Todo",[n]);case 2:o=e.list.findIndex((function(e){return e.ID===n.ID})),e.list.splice(o,1,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),I=Object(U.a)(A.prototype,"addTodo",[H.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(F.a)(P.a.mark((function t(n){var o,i,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={ID:"",text:n,isDone:!1},t.next=3,e.client.modelCreate(e.listID,"Todo",[o]);case 3:i=t.sent,a=i.entitiesList,e.list.unshift(new Q(a.pop()));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),Z=Object(U.a)(A.prototype,"removeTodo",[H.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(function(){var t=Object(F.a)(P.a.mark((function t(n){var o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.modelDelete(e.listID,"Todo",[n.ID]);case 2:o=e.list.findIndex((function(e){return e.ID===n.ID})),e.list.splice(o,1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),A),L=(n(308),n(150)),V=n.n(L);!function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");j?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):O(e)}))}}();var W="5GEm36BDFXkKNx9LbW9eX6zAFuwUVJbb9P5UnXaFg2XaoQ7i",Y=R.a.parse(window.location.search);if(Y.user)W=Y.user.toString();else{var $={user:W};window.location.search=R.a.stringify($)}new V.a({token:"38fc999c-d621-4411-8263-49752bb6f340",deviceId:W}).start().then((function(e){var t=new G([],e.threadsConfig);window.todoList=t,r.a.render(i.a.createElement(u,{value:t},i.a.createElement(D,null)),document.getElementById("root"))}))}},[[162,1,2]]]);
//# sourceMappingURL=main.a8e3088a.chunk.js.map